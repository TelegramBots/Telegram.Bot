trigger: none

pr:
  branches:
    include:
      - develop
  paths:
    exclude:
      - ".github/"
      - docs/
      - README.md
      - CHANGELOG.md
      - CONTRIBUTING.md

variables:
  - template: variables.yml

stages:
  - stage: UnitTest
    displayName: ðŸ§ª Unit test
    jobs:
      - template: jobs/run-unit-tests.yml
        parameters:
          buildConfiguration: $(buildConfiguration)
          projects: $(unitTestsProject)
          strategies:
            - Windows: windows-2022
            - Ubuntu: ubuntu-22.04
            - macOS: macOS-12
  - stage: IntegrationTests
    displayName: ðŸ§ª Integration tests
    jobs:
      - template: jobs/run-integration-tests.yml
        parameters:
          vmImage: $(vmImage)
          buildConfiguration: $(buildConfiguration)
          projects: $(integrationTestsProject)
